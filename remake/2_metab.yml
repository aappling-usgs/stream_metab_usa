target_default: 1_metab

include:
  - 1_site_data.yml

packages:
  - yaml
  - dplyr
  - mda.streams
  - sbtools

sources:
  - ../2_metab_config/code/choose_metab_sites.R
  - ../2_metab_config/prep/code/create_prep_config.R
  - ../2_metab_config/code/create_metab_config.R
  - ../lib/load_profile.R
  - ../lib/write_status_table.R

targets:
  1_metab:
    depends: 
      - metab.config

  config:
    command: yaml.load_file('../2_metab_config/in/metab_configs_config.yml')
  
  metab.sites:
    command: choose_metab_sites(config,
      harvey.file='../1_site_data/in/sites_harvey_ask.txt',
      site.file='../1_site_data/out/site_list.tsv')
  
  metab.prep.config: 
    command: create_prep_config(metab.sites, config)
  
  metab.config:
    command: create_metab_config(config)
