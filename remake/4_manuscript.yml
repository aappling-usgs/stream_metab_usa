target_default: 4_manuscript

include:
  - 4_release_spatial.yml
  
packages:
  - maps
  - sp
  - rgeos
  - dplyr
  - dataRetrieval
  - mda.streams
  
sources:
  - ../4_manuscript/code/spatial_plotting.R
  - ../4_manuscript/code/fig_site_description.R
  - ../4_manuscript/code/tbl_catchment_sources.R
 
targets:
  4_manuscript:
    depends: 
      - ../4_manuscript/tbl/catchment_sources.csv

  # - ../4_manuscript/out/figure_01.png
  
  #### tables ####
  
  ../4_manuscript/tbl/catchment_sources.csv:
    command: tbl_catchment_sources(outfile=target_name, catchments=catchments_as_written, metafile='../4_data_release/out/site_catchment_shapefile.xml')
  
  #### figures ####
  
  ../4_manuscript/fig/sites.pdf:
    command: fig_site_description(
      outfile=target_name, 
      daily_zip='../4_data_release/cache/models/post/daily_predictions.zip',
      points_shp='../1_spatial/cache/points_shapefile/points_shapefile.shp',
      site_tsv='../4_data_release/cache/site_data.tsv')

