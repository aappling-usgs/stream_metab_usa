target_default: 4_manuscript

include:
  - 4_release_spatial.yml
  
packages:
  - maps
  - sp
  - rgeos
  - dplyr
  - dataRetrieval
  - mda.streams
  
sources:
  - ../4_manuscript/code/spatial_plotting.R
  - ../4_manuscript/code/tbl_catchment_sources.R
 
targets:
  4_manuscript:
    depends: 
      - ../4_manuscript/tbl/catchment_sources.csv

  # - ../4_manuscript/out/figure_01.png
  
  #### tables ####
  ../4_manuscript/tbl/catchment_sources.csv:
    command: tbl_catchment_sources(outfile=target_name, catchments=catchments_as_written, metafile='../4_data_release/out/site_catchment_shapefile.xml')
  
  #### figures ####
  
  sp_sites:
    command: append_hucs(spatial.points)

  ../4_manuscript/out/figure_01.png:
    command: plot_national_site_map(target_name, sp_sites)
    plot: true
    
  ../4_manuscript/out/fig_site_description.png:
    command: plot_site_description(target_name, 
      dailies='../4_data_release/cache/models/post/daily_predictions.zip')

