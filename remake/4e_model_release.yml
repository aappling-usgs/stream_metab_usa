# Do not edit - automatically generated
# from the task_makefile.mustache template
# by create_task_makefile() via create_model_release_makefile()

target_default: 4e_model_release

include:
  - 4_release_models.yml

packages:
  - mda.streams
  - streamMetabolizer
  - dplyr
  - readr

file_extensions:
  - "ind"
  - "RData"

targets:
  # --- nwis_01548303-1-170406 1.0.2 bayes_15min --- #
  
  '../4_data_release/cache/models/mm_nwis_01548303-1-170406 1.0.2 bayes_15min.RData':
    command: download_model(model_name=I('nwis_01548303-1-170406 1.0.2 bayes_15min'), model_folder=I('../4_data_release/cache/models'))

  '../4_data_release/cache/models/nwis_01548303_15min_input.rds':
    command: extract_model_inputs('../4_data_release/cache/models/mm_nwis_01548303-1-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_01548303_15min_daily.rds':
    command: extract_model_dailies('../4_data_release/cache/models/mm_nwis_01548303-1-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_01548303_15min_fit.zip':
    command: extract_model_fits('../4_data_release/cache/models/mm_nwis_01548303-1-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/log/models/nwis_01548303-1-170406 1.0.2 bayes_15min.ind':
    command: write_timestamp(target_name)
    depends:
      - '../4_data_release/cache/models/nwis_01548303_15min_input.rds'
      - '../4_data_release/cache/models/nwis_01548303_15min_daily.rds'
      - '../4_data_release/cache/models/nwis_01548303_15min_fit.zip'

  # --- nwis_02168504-2-170406 1.0.2 bayes_60min --- #
  
  '../4_data_release/cache/models/mm_nwis_02168504-2-170406 1.0.2 bayes_60min.RData':
    command: download_model(model_name=I('nwis_02168504-2-170406 1.0.2 bayes_60min'), model_folder=I('../4_data_release/cache/models'))

  '../4_data_release/cache/models/nwis_02168504_60min_input.rds':
    command: extract_model_inputs('../4_data_release/cache/models/mm_nwis_02168504-2-170406 1.0.2 bayes_60min.RData', target_name)

  '../4_data_release/cache/models/nwis_02168504_60min_daily.rds':
    command: extract_model_dailies('../4_data_release/cache/models/mm_nwis_02168504-2-170406 1.0.2 bayes_60min.RData', target_name)

  '../4_data_release/cache/models/nwis_02168504_60min_fit.zip':
    command: extract_model_fits('../4_data_release/cache/models/mm_nwis_02168504-2-170406 1.0.2 bayes_60min.RData', target_name)

  '../4_data_release/log/models/nwis_02168504-2-170406 1.0.2 bayes_60min.ind':
    command: write_timestamp(target_name)
    depends:
      - '../4_data_release/cache/models/nwis_02168504_60min_input.rds'
      - '../4_data_release/cache/models/nwis_02168504_60min_daily.rds'
      - '../4_data_release/cache/models/nwis_02168504_60min_fit.zip'

  # --- nwis_03292480-3-170406 1.0.2 bayes_15min --- #
  
  '../4_data_release/cache/models/mm_nwis_03292480-3-170406 1.0.2 bayes_15min.RData':
    command: download_model(model_name=I('nwis_03292480-3-170406 1.0.2 bayes_15min'), model_folder=I('../4_data_release/cache/models'))

  '../4_data_release/cache/models/nwis_03292480_15min_input.rds':
    command: extract_model_inputs('../4_data_release/cache/models/mm_nwis_03292480-3-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_03292480_15min_daily.rds':
    command: extract_model_dailies('../4_data_release/cache/models/mm_nwis_03292480-3-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_03292480_15min_fit.zip':
    command: extract_model_fits('../4_data_release/cache/models/mm_nwis_03292480-3-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/log/models/nwis_03292480-3-170406 1.0.2 bayes_15min.ind':
    command: write_timestamp(target_name)
    depends:
      - '../4_data_release/cache/models/nwis_03292480_15min_input.rds'
      - '../4_data_release/cache/models/nwis_03292480_15min_daily.rds'
      - '../4_data_release/cache/models/nwis_03292480_15min_fit.zip'

  # --- nwis_03293000-4-170406 1.0.2 bayes_15min --- #
  
  '../4_data_release/cache/models/mm_nwis_03293000-4-170406 1.0.2 bayes_15min.RData':
    command: download_model(model_name=I('nwis_03293000-4-170406 1.0.2 bayes_15min'), model_folder=I('../4_data_release/cache/models'))

  '../4_data_release/cache/models/nwis_03293000_15min_input.rds':
    command: extract_model_inputs('../4_data_release/cache/models/mm_nwis_03293000-4-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_03293000_15min_daily.rds':
    command: extract_model_dailies('../4_data_release/cache/models/mm_nwis_03293000-4-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_03293000_15min_fit.zip':
    command: extract_model_fits('../4_data_release/cache/models/mm_nwis_03293000-4-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/log/models/nwis_03293000-4-170406 1.0.2 bayes_15min.ind':
    command: write_timestamp(target_name)
    depends:
      - '../4_data_release/cache/models/nwis_03293000_15min_input.rds'
      - '../4_data_release/cache/models/nwis_03293000_15min_daily.rds'
      - '../4_data_release/cache/models/nwis_03293000_15min_fit.zip'

  # --- nwis_03298200-5-170406 1.0.2 bayes_15min --- #
  
  '../4_data_release/cache/models/mm_nwis_03298200-5-170406 1.0.2 bayes_15min.RData':
    command: download_model(model_name=I('nwis_03298200-5-170406 1.0.2 bayes_15min'), model_folder=I('../4_data_release/cache/models'))

  '../4_data_release/cache/models/nwis_03298200_15min_input.rds':
    command: extract_model_inputs('../4_data_release/cache/models/mm_nwis_03298200-5-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_03298200_15min_daily.rds':
    command: extract_model_dailies('../4_data_release/cache/models/mm_nwis_03298200-5-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_03298200_15min_fit.zip':
    command: extract_model_fits('../4_data_release/cache/models/mm_nwis_03298200-5-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/log/models/nwis_03298200-5-170406 1.0.2 bayes_15min.ind':
    command: write_timestamp(target_name)
    depends:
      - '../4_data_release/cache/models/nwis_03298200_15min_input.rds'
      - '../4_data_release/cache/models/nwis_03298200_15min_daily.rds'
      - '../4_data_release/cache/models/nwis_03298200_15min_fit.zip'

  # --- nwis_05418400-6-170406 1.0.2 bayes_15min --- #
  
  '../4_data_release/cache/models/mm_nwis_05418400-6-170406 1.0.2 bayes_15min.RData':
    command: download_model(model_name=I('nwis_05418400-6-170406 1.0.2 bayes_15min'), model_folder=I('../4_data_release/cache/models'))

  '../4_data_release/cache/models/nwis_05418400_15min_input.rds':
    command: extract_model_inputs('../4_data_release/cache/models/mm_nwis_05418400-6-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_05418400_15min_daily.rds':
    command: extract_model_dailies('../4_data_release/cache/models/mm_nwis_05418400-6-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/cache/models/nwis_05418400_15min_fit.zip':
    command: extract_model_fits('../4_data_release/cache/models/mm_nwis_05418400-6-170406 1.0.2 bayes_15min.RData', target_name)

  '../4_data_release/log/models/nwis_05418400-6-170406 1.0.2 bayes_15min.ind':
    command: write_timestamp(target_name)
    depends:
      - '../4_data_release/cache/models/nwis_05418400_15min_input.rds'
      - '../4_data_release/cache/models/nwis_05418400_15min_daily.rds'
      - '../4_data_release/cache/models/nwis_05418400_15min_fit.zip'

  # --- Overall job --- #

  4e_model_release:
    command: write_timestamp(I('../4_data_release/log/4e_model_release.ind'))
    depends: 
      - '../4_data_release/log/models/nwis_01548303-1-170406 1.0.2 bayes_15min.ind'
      - '../4_data_release/log/models/nwis_02168504-2-170406 1.0.2 bayes_60min.ind'
      - '../4_data_release/log/models/nwis_03292480-3-170406 1.0.2 bayes_15min.ind'
      - '../4_data_release/log/models/nwis_03293000-4-170406 1.0.2 bayes_15min.ind'
      - '../4_data_release/log/models/nwis_03298200-5-170406 1.0.2 bayes_15min.ind'
      - '../4_data_release/log/models/nwis_05418400-6-170406 1.0.2 bayes_15min.ind'
