target_default: 1_spatial

include:
  - 1_site_data.yml

packages:
  - yaml
  - dplyr
  - rgdal
  - mda.streams
  - sbtools
  - httr
  - maptools

sources:
  - ../lib/load_profile.R
  - ../1_spatial/code/makeshape.R
  
targets:
  1_spatial:
    depends: 
      - ../1_spatial/out/site_catchment_map.png
      - spatial.points

    
  spatial.sites: 
    command: spatial_filter_sites(meta_basic)
    
  spatial.points:
    command: create_site_points(spatial.sites)
  
  epa_basins:
    command: get_catchments(spatial.sites, target_name)
  
  gagesii_basins:
    command: get_catchments(spatial.sites, target_name, epa_basins)
  
  spatial.catchments:
    command: combine_spatial(epa_basins, gagesii_basins)
    
  ../1_spatial/out/site_catchment_map.png:
    command: inventory_map(spatial.points, spatial.catchments, target_name)
    
  
