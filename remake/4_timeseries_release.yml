target_default: 4_timeseries_out

# rendered with ....instructions here....
include:
  - 4_data_release.yml # ../1_timeseries/out/all_ts_files.tsv
  
packages:
  - mda.streams
  - unitted

sources:
  - ../lib/load_profile.R
  - ../4_timeseries_release/code/download_release.R
  
targets:
  4_timeseries_out:
    depends:
      - nwis_01021050_timeseries

  
  
  pc4_timeseries:
    command: create_release_child(stream_metab_powell_release, target_name)
    
  # -- for each site: ----  
  
  ../1_timeseries/cache/nwis_01021050-ts_baro_gldas.rds: # add this target only if it is posted and tagged, see ../1_timeseries/out/files_ts_baro_gldas.tsv
    command: download_release_ts(target_name) 

  ../1_timeseries/cache/nwis_01021050-ts_sw_nldas.rds:
    command: download_release_ts(target_name)

  nwis_01021050_timeseries:
    command: merge_and_post_sb(target_name, pc4_timeseries, '../1_timeseries/cache/nwis_01021050-ts_baro_gldas.rds', '../1_timeseries/cache/nwis_01021050-ts_sw_nldas.rds')
